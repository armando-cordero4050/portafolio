import{_ as re}from"./AppTextField.vue_vue_type_script_setup_true_lang-b9010814.js";import{_ as de}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-f3ef7eac.js";import{V as q,a as ue,b as me,d as B}from"./VCard-59875098.js";import{V as ce}from"./VForm-726cd563.js";import{V as pe}from"./VTable-abc80424.js";import{V as T}from"./VCheckbox-3ee887fa.js";import{d as Q,l as p,D as K,Y as F,o as g,b as R,w as a,q as e,Q as x,y as b,s as l,H as P,n as s,c as k,F as N,a as W,G as A,ai as M,aj as S,a2 as L,a0 as z,a1 as O,ak as G,al as X,am as fe,A as H,z as j,a4 as _e,r as ee,ah as ve,Z as ae}from"./main-3f772619.js";import{V as ge}from"./VDialog-e23e7490.js";import{a as $,V as Y}from"./VRow-0c7e6edd.js";import{V as Z}from"./VSpacer-95ea05c9.js";import{V as E}from"./VAvatar-1d1d21c4.js";import{_ as Ve}from"./AppSelect.vue_vue_type_script_setup_true_lang-2075f231.js";import{_ as we}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-0460a846.js";import{u as be}from"./useUserListStore-5b3d6021.js";import{a as he}from"./formatters-c683a4a2.js";import{V as xe}from"./VSelect-71e7b68e.js";import{V as te}from"./VDivider-13482bbd.js";import{V as ye}from"./VDataTableServer-85f532c8.js";import{V as Ue}from"./VImg-1135bfd9.js";import{V as Pe}from"./VChip-2fda8c84.js";import{V as Ce}from"./VPagination-a261075b.js";import{V as ke}from"./VMenu-967601e6.js";import{V as De,a as se,b as le}from"./VList-0fef076a.js";import"./VInput-e8e8f4b8.js";import"./transition-6332bc63.js";import"./VTextField-0defed1e.js";/* empty css                   */import"./VField-95e14b22.js";import"./easing-9f15041e.js";import"./forwardRefs-a29b5f65.js";import"./VCounter-f4b5b2c9.js";import"./VCheckboxBtn-6ff3878e.js";import"./VSelectionControl-3fa884ca.js";import"./VOverlay-6f080a03.js";import"./lazy-8d4ca870.js";import"./dialog-transition-6d5a70b3.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-25e26460.js";import"./validators-33c369bf.js";import"./index-681711bc.js";import"./VNavigationDrawer-0b2c281d.js";import"./ssrBoot-4dae7a50.js";import"./VDataTable-4dab2c1b.js";import"./filter-4b6cadd9.js";const Re=s("p",{class:"text-base mb-0"}," Set Role Permissions ",-1),$e=s("h6",{class:"text-h4 mt-8 mb-3"}," Role Permissions ",-1),Ae=s("td",null," Administrator Access ",-1),Me={colspan:"3"},Se={class:"d-flex justify-end"},Le={class:"d-flex justify-end"},ze={class:"d-flex justify-end"},Ne={class:"d-flex justify-end"},je={class:"d-flex align-center justify-center gap-3 mt-6"},Be=Q({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(I,{emit:h}){const m=I,d=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),f=p(!1),y=p(""),V=p(),_=K(()=>{let i=0;return d.value.forEach(u=>{Object.entries(u).forEach(([C,U])=>{C!=="name"&&U&&i++})}),i}),o=K(()=>_.value>0&&_.value<d.value.length*3);F(f,i=>{d.value=d.value.map(u=>({...u,read:i,write:i,create:i}))}),F(o,()=>{o.value||(f.value=!1)}),F(d,()=>{_.value===d.value.length*3&&(f.value=!0)},{deep:!0}),F(m,()=>{m.rolePermissions&&m.rolePermissions.permissions.length&&(y.value=m.rolePermissions.name,d.value=d.value.map(i=>{var C;const u=(C=m.rolePermissions)==null?void 0:C.permissions.find(U=>U.name===i.name);return u?{...i,...u}:i}))});const n=()=>{var u;const i={name:y.value,permissions:d.value};h("update:rolePermissions",i),h("update:isDialogVisible",!1),f.value=!1,(u=V.value)==null||u.reset()},w=()=>{var i;h("update:isDialogVisible",!1),f.value=!1,(i=V.value)==null||i.reset()};return(i,u)=>{const C=de,U=re;return g(),R(ge,{width:i.$vuetify.display.smAndDown?"auto":900,"model-value":m.isDialogVisible,"onUpdate:modelValue":w},{default:a(()=>[e(C,{onClick:w}),e(q,{class:"pa-sm-8 pa-5"},{default:a(()=>[e(ue,{class:"text-center"},{default:a(()=>[e(me,{class:"text-h3 mb-3"},{default:a(()=>[x(b(m.rolePermissions.name?"Edit":"Add New")+" Role ",1)]),_:1}),Re]),_:1}),e(B,{class:"mt-6"},{default:a(()=>[e(l(ce),{ref_key:"refPermissionForm",ref:V},{default:a(()=>[e(U,{modelValue:l(y),"onUpdate:modelValue":u[0]||(u[0]=c=>P(y)?y.value=c:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),$e,e(pe,{class:"permission-table text-no-wrap"},{default:a(()=>[s("tr",null,[Ae,s("td",Me,[s("div",Se,[e(T,{modelValue:l(f),"onUpdate:modelValue":u[1]||(u[1]=c=>P(f)?f.value=c:null),indeterminate:l(o),"onUpdate:indeterminate":u[2]||(u[2]=c=>P(o)?o.value=c:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(g(!0),k(N,null,W(l(d),c=>(g(),k("tr",{key:c.name},[s("td",null,b(c.name),1),s("td",null,[s("div",Le,[e(T,{modelValue:c.read,"onUpdate:modelValue":D=>c.read=D,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[s("div",ze,[e(T,{modelValue:c.write,"onUpdate:modelValue":D=>c.write=D,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[s("div",Ne,[e(T,{modelValue:c.create,"onUpdate:modelValue":D=>c.create=D,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),s("div",je,[e(A,{onClick:n},{default:a(()=>[x(" Submit ")]),_:1}),e(A,{color:"secondary",variant:"tonal",onClick:w},{default:a(()=>[x(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}});const Ee="/build/assets/avatar-10-6cde2497.png",Ie="/build/assets/avatar-9-efad028c.png",Te="/build/assets/girl-using-mobile-7d068ec5.png",Fe={class:"v-avatar-group"},Oe={class:"text-h4"},qe={class:"d-flex align-center"},Qe=["onClick"],Ge=["src"],He=s("span",null,"Add role, if it doesn't exist.",-1),We=Q({__name:"RoleCards",setup(I){const h=p([{role:"Administrator",users:[M,S,L,z],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[M,S,L,z,O,G,X],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[M,S,L,z,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[M,S,L,z,O,G],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[M,S,L,z,O,G,X,fe,Ie,Ee],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),m=p(!1),d=p(),f=p(!1),y=V=>{m.value=!0,d.value=V};return(V,_)=>{const o=Be;return g(),k(N,null,[e(Y,null,{default:a(()=>[(g(!0),k(N,null,W(l(h),n=>(g(),R($,{key:n.role,cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(q,null,{default:a(()=>[e(B,{class:"d-flex align-center pb-1"},{default:a(()=>[s("span",null,"Total "+b(n.users.length)+" users",1),e(Z),s("div",Fe,[(g(!0),k(N,null,W(n.users,(w,i)=>(g(),k(N,{key:w},[n.users.length>4&&n.users.length!==4&&i<3?(g(),R(E,{key:0,size:"36",image:w},null,8,["image"])):H("",!0),n.users.length===4?(g(),R(E,{key:1,size:"36",image:w},null,8,["image"])):H("",!0)],64))),128)),n.users.length>4?(g(),R(E,{key:0,color:V.$vuetify.theme.current.dark?"#4A5072":"#f6f6f7"},{default:a(()=>[s("span",null," +"+b(n.users.length-3),1)]),_:2},1032,["color"])):H("",!0)])]),_:2},1024),e(B,{class:"pb-5"},{default:a(()=>[s("h4",Oe,b(n.role),1),s("div",qe,[s("a",{href:"javascript:void(0)",onClick:w=>y(n.details)}," Edit Role ",8,Qe),e(Z),e(A,{icon:"",color:"disabled",variant:"text",size:"x-small"},{default:a(()=>[e(j,{size:"24",icon:"tabler-copy"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e($,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(q,{class:"h-100",ripple:!1,onClick:_[0]||(_[0]=n=>f.value=!0)},{default:a(()=>[e(Y,{"no-gutters":"",class:"h-100"},{default:a(()=>[e($,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:a(()=>[s("img",{width:"85",src:l(Te)},null,8,Ge)]),_:1}),e($,{cols:"7"},{default:a(()=>[e(B,{class:"d-flex flex-column align-end justify-end gap-2 h-100",style:{"text-align":"end"}},{default:a(()=>[e(A,null,{default:a(()=>[x("Add New Role")]),_:1}),He]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{"is-dialog-visible":l(f),"onUpdate:isDialogVisible":_[1]||(_[1]=n=>P(f)?f.value=n:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(o,{"is-dialog-visible":l(m),"onUpdate:isDialogVisible":_[2]||(_[2]=n=>P(m)?m.value=n:null),"role-permissions":l(d),"onUpdate:rolePermissions":_[3]||(_[3]=n=>P(d)?d.value=n:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),Ye={class:"d-flex align-center flex-wrap gap-4"},Ze={class:"d-flex align-center"},Je={key:1},Ke={class:"d-flex flex-column"},Xe={class:"text-body-1 font-weight-medium"},ea={class:"text-sm text-disabled"},aa={class:"d-flex align-center gap-4"},ta={class:"text-capitalize"},sa={class:"text-capitalize font-weight-medium"},la={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ra={class:"text-sm text-disabled mb-0"},oa=Q({__name:"UserList",setup(I){const h=be(),m=p(""),d=p(),f=p(),y=p(),V=p(0),_=p([]),o=p({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),n=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],w=()=>{h.fetchUsers({q:m.value,status:y.value,plan:f.value,role:d.value,options:o.value}).then(v=>{_.value=v.data.users,V.value=v.data.totalUsers,o.value.page=v.data.page}).catch(v=>{console.error(v)})};_e(w);const i=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],u=v=>{const r=v.toLowerCase();return r==="subscriber"?{color:"primary",icon:"tabler-user"}:r==="author"?{color:"warning",icon:"tabler-settings"}:r==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:r==="editor"?{color:"info",icon:"tabler-pencil"}:r==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},C=v=>{const r=v.toLowerCase();return r==="pending"?"warning":r==="active"?"success":r==="inactive"?"secondary":"primary"},U=p(!1),c=v=>{h.addUser(v),w()},D=v=>{h.deleteUser(v),w()};return(v,r)=>{const oe=Ve,ne=re,ie=ee("RouterLink"),J=ee("IconBtn");return g(),k("section",null,[e(q,null,{default:a(()=>[e(B,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(oe,{"model-value":l(o).itemsPerPage,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{width:"5rem"},"onUpdate:modelValue":r[0]||(r[0]=t=>l(o).itemsPerPage=parseInt(t,10))},null,8,["model-value"]),e(Z),s("div",Ye,[e(ne,{modelValue:l(m),"onUpdate:modelValue":r[1]||(r[1]=t=>P(m)?m.value=t:null),placeholder:"Search User",density:"compact",style:{width:"12.5rem"}},null,8,["modelValue"]),e(xe,{modelValue:l(d),"onUpdate:modelValue":r[2]||(r[2]=t=>P(d)?d.value=t:null),label:"Select Role",items:i,density:"compact",clearable:"","clear-icon":"tabler-x",style:{width:"10rem"}},null,8,["modelValue"])])]),_:1}),e(te),e(l(ye),{"items-per-page":l(o).itemsPerPage,"onUpdate:itemsPerPage":r[4]||(r[4]=t=>l(o).itemsPerPage=t),page:l(o).page,"onUpdate:page":r[5]||(r[5]=t=>l(o).page=t),items:l(_),"items-length":l(V),headers:n,class:"text-no-wrap","onUpdate:options":r[6]||(r[6]=t=>o.value=t)},{"item.user":a(({item:t})=>[s("div",Ze,[e(E,{size:"38",variant:t.raw.avatar?void 0:"tonal",color:t.raw.avatar?void 0:u(t.raw.role).color,class:"me-3"},{default:a(()=>[t.raw.avatar?(g(),R(Ue,{key:0,src:t.raw.avatar},null,8,["src"])):(g(),k("span",Je,b(l(he)(t.raw.fullName)),1))]),_:2},1032,["variant","color"]),s("div",Ke,[s("h6",Xe,[e(ie,{to:{name:"apps-user-view-id",params:{id:t.raw.id}},class:"user-list-name"},{default:a(()=>[x(b(t.raw.fullName),1)]),_:2},1032,["to"])]),s("span",ea,b(t.raw.email),1)])])]),"item.role":a(({item:t})=>[s("div",aa,[e(E,{size:"30",variant:"tonal",color:u(t.raw.role).color},{default:a(()=>[e(j,{size:"20",icon:u(t.raw.role).icon},null,8,["icon"])]),_:2},1032,["color"]),s("span",ta,b(t.raw.role),1)])]),"item.plan":a(({item:t})=>[s("span",sa,b(t.raw.currentPlan),1)]),"item.status":a(({item:t})=>[e(Pe,{label:"",size:"small",class:"text-capitalize",color:C(t.raw.status)},{default:a(()=>[x(b(t.raw.status),1)]),_:2},1032,["color"])]),bottom:a(()=>[e(te),s("div",la,[s("p",ra,b(l(ve)(l(o),l(V))),1),e(Ce,{modelValue:l(o).page,"onUpdate:modelValue":r[3]||(r[3]=t=>l(o).page=t),length:Math.ceil(l(V)/l(o).itemsPerPage),"total-visible":v.$vuetify.display.xs?1:Math.ceil(l(V)/l(o).itemsPerPage)},{prev:a(t=>[e(A,ae({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>[x(" Previous ")]),_:2},1040)]),next:a(t=>[e(A,ae({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>[x(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":a(({item:t})=>[e(J,null,{default:a(()=>[e(j,{icon:"tabler-edit"})]),_:1}),e(J,{onClick:da=>D(t.raw.id)},{default:a(()=>[e(j,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(A,{icon:"",color:"medium-emphasis",density:"comfortable",variant:"text"},{default:a(()=>[e(j,{size:"24",icon:"tabler-dots-vertical"}),e(ke,{activator:"parent"},{default:a(()=>[e(De,null,{default:a(()=>[e(se,{to:{name:"apps-user-view-id",params:{id:t.raw.id}}},{default:a(()=>[e(le,null,{default:a(()=>[x("View")]),_:1})]),_:2},1032,["to"]),e(se,{link:""},{default:a(()=>[e(le,null,{default:a(()=>[x("Suspend")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(we,{isDrawerOpen:l(U),"onUpdate:isDrawerOpen":r[7]||(r[7]=t=>P(U)?U.value=t:null),onUserData:c},null,8,["isDrawerOpen"])])}}});const na=s("h4",{class:"text-h4 mb-6"}," Roles List ",-1),ia=s("p",{class:"mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),Xa=Q({__name:"index",setup(I){return(h,m)=>(g(),R(Y,null,{default:a(()=>[e($,{cols:"12"},{default:a(()=>[na,ia]),_:1}),e($,{cols:"12"},{default:a(()=>[e(We)]),_:1}),e($,{cols:"12"},{default:a(()=>[e(oa)]),_:1})]),_:1}))}});export{Xa as default};
